<section class="contact-section" dir="rtl" lang="ar">
  <div class="container">
    <!-- Page Title -->
    <header class="page-header">
      <h1 class="page-title">تواصل معنا</h1>
    </header>

    <div class="contact-grid">
      <!-- Right Column: Contact Information -->
      <aside class="contact-info-wrapper">
        <!-- Contact Details Card -->
        <article class="contact-card">
          <h2 class="card-title">بيانات الاتصال</h2>

          <div class="contact-items">
            <div class="contact-item" *ngFor="let detail of contactDetails">
              <div class="icon-wrapper">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  [attr.aria-label]="detail.title"
                  role="img">
                  <ng-container [ngSwitch]="detail.icon">
                    <g *ngSwitchCase="'map-pin'">
                      <path d="M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0"></path>
                      <circle cx="12" cy="10" r="3"></circle>
                    </g>
                    <g *ngSwitchCase="'phone'">
                      <path d="M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384"></path>
                    </g>
                    <g *ngSwitchCase="'mail'">
                      <path d="m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7"></path>
                      <rect x="2" y="4" width="20" height="16" rx="2"></rect>
                    </g>
                    <g *ngSwitchCase="'clock'">
                      <circle cx="12" cy="12" r="10"></circle>
                      <polyline points="12 6 12 12 16 14"></polyline>
                    </g>
                  </ng-container>
                </svg>
              </div>
              <div class="contact-content">
                <h3 class="contact-title">{{ detail.title }}</h3>
                <p class="contact-text" [attr.dir]="detail.dir || 'rtl'">
                  <span *ngFor="let line of detail.content.split('\n')">
                    {{ line }}<br *ngIf="detail.content.split('\n').length > 1">
                  </span>
                </p>
              </div>
            </div>
          </div>
        </article>

        <!-- Map Placeholder -->
        <div class="map-container" role="img" aria-label="موقعنا على الخريطة">
          <img
            src="https://images.unsplash.com/photo-1524661135-423995f22d0b?auto=format&fit=crop&q=80&w=1000"
            alt="خريطة موقع Power EV في حلوان، القاهرة"
            class="map-image"
            loading="lazy"
            width="1000"
            height="400">
          <div class="map-overlay">
            <span class="map-label">خريطة الموقع (Google Maps)</span>
          </div>
        </div>
      </aside>

      <!-- Left Column: Contact Form -->
      <article class="form-wrapper">
        <div class="form-card">
          <h2 class="card-title">أرسل لنا رسالة</h2>

          <form [formGroup]="contactForm" (ngSubmit)="onSubmit()" class="contact-form" novalidate>
            <!-- Name and Phone Row -->
            <div class="form-row">
              <div class="form-group">
                <label for="name" class="form-label">
                  الاسم <span class="required">*</span>
                </label>
                <input
                  type="text"
                  id="name"
                  formControlName="name"
                  class="form-input"
                  [class.error]="isFieldInvalid('name')"
                  placeholder="أدخل اسمك"
                  autocomplete="name"
                  aria-required="true"
                  [attr.aria-invalid]="isFieldInvalid('name')">
                <span class="error-message" *ngIf="isFieldInvalid('name')">
                  يرجى إدخال اسم صحيح (حرفين على الأقل)
                </span>
              </div>

              <div class="form-group">
                <label for="phone" class="form-label">
                  رقم الهاتف <span class="required">*</span>
                </label>
                <input
                  type="tel"
                  id="phone"
                  formControlName="phone"
                  class="form-input"
                  [class.error]="isFieldInvalid('phone')"
                  placeholder="01012345678"
                  dir="ltr"
                  autocomplete="tel"
                  aria-required="true"
                  [attr.aria-invalid]="isFieldInvalid('phone')">
                <span class="error-message" *ngIf="isFieldInvalid('phone')">
                  يرجى إدخال رقم هاتف صحيح (10-15 رقم)
                </span>
              </div>
            </div>

            <!-- Email Field -->
            <div class="form-group">
              <label for="email" class="form-label">
                البريد الإلكتروني <span class="required">*</span>
              </label>
              <input
                type="email"
                id="email"
                formControlName="email"
                class="form-input"
                [class.error]="isFieldInvalid('email')"
                placeholder="example@email.com"
                autocomplete="email"
                aria-required="true"
                [attr.aria-invalid]="isFieldInvalid('email')">
              <span class="error-message" *ngIf="isFieldInvalid('email')">
                يرجى إدخال بريد إلكتروني صحيح
              </span>
            </div>

            <!-- Inquiry Type Field -->
            <div class="form-group">
              <label for="inquiryType" class="form-label">
                نوع الاستفسار <span class="required">*</span>
              </label>
              <select
                id="inquiryType"
                formControlName="inquiryType"
                class="form-select"
                aria-required="true">
                <option *ngFor="let type of inquiryTypes" [value]="type">
                  {{ type }}
                </option>
              </select>
            </div>

            <!-- Message Field -->
            <div class="form-group">
              <label for="message" class="form-label">
                الرسالة <span class="required">*</span>
              </label>
              <textarea
                id="message"
                formControlName="message"
                rows="5"
                class="form-textarea"
                [class.error]="isFieldInvalid('message')"
                placeholder="اكتب رسالتك هنا..."
                aria-required="true"
                [attr.aria-invalid]="isFieldInvalid('message')"></textarea>
              <span class="error-message" *ngIf="isFieldInvalid('message')">
                يرجى إدخال رسالة (10 أحرف على الأقل)
              </span>
            </div>

            <!-- Submit Button -->
            <button
              type="submit"
              class="submit-btn"
              [disabled]="isSubmitting"
              [class.submitting]="isSubmitting">
              <span *ngIf="!isSubmitting">إرسال الرسالة</span>
              <span *ngIf="isSubmitting">جاري الإرسال...</span>
            </button>
          </form>
        </div>
      </article>
    </div>
  </div>
</section>
