<header class="navbar-header" dir="rtl">
  <div class="container-fluid">
    <div class="navbar-wrapper">

      <!-- Logo (Right Side for RTL) -->
      <div class="navbar-brand">
        <a routerLink="/" class="logo-link">
          <img
            src="/assets/images/logo/logo.webp"
            alt="PowerEV Logo"
            class="logo-img"
          />
        </a>
      </div>

      <!-- Desktop Navigation (Center) -->
      <nav class="desktop-nav">
        <a
          *ngFor="let link of navLinks"
          [routerLink]="link.path"
          routerLinkActive="active"
          [routerLinkActiveOptions]="{ exact: link.path === '/' }"
          class="nav-link"
        >
          <span class="nav-link-text">{{ link.name }}</span>
          <span class="nav-link-indicator"></span>
        </a>
      </nav>

      <!-- Actions (Left Side for RTL) -->
      <div class="navbar-actions">

        <!-- Phone Link -->
        <a href="tel:01020216898" class="phone-link">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="20"
            height="20"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <path
              d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"
            ></path>
          </svg>
          <span class="phone-number" dir="ltr">010 2021 6898</span>
        </a>

        <!-- Theme Toggle Button -->
        <button
          class="theme-toggle"
          (click)="toggleTheme()"
          [attr.aria-label]="isDark ? 'تفعيل الوضع الفاتح' : 'تفعيل الوضع الداكن'"
          [title]="isDark ? 'تفعيل الوضع الفاتح' : 'تفعيل الوضع الداكن'"
          type="button"
        >
          <!-- Moon icon (shown in dark mode — click to go light) -->
          <span class="theme-icon theme-icon-dark" [class.visible]="isDark">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"
              fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
            </svg>
          </span>
          <!-- Sun icon (shown in light mode — click to go dark) -->
          <span class="theme-icon theme-icon-light" [class.visible]="!isDark">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"
              fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="12" cy="12" r="4"></circle>
              <path d="M12 2v2M12 20v2M4.93 4.93l1.41 1.41M17.66 17.66l1.41 1.41M2 12h2M20 12h2M6.34 17.66l-1.41 1.41M19.07 4.93l-1.41 1.41"></path>
            </svg>
          </span>
          <!-- Animated track -->
          <span class="toggle-track">
            <span class="toggle-thumb" [class.light]="!isDark"></span>
          </span>
        </button>

        <!-- Cart Link -->
        <a routerLink="/cart" class="cart-link" [class.has-items]="cartCount > 0">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="22"
            height="22"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <circle cx="9" cy="21" r="1"></circle>
            <circle cx="20" cy="21" r="1"></circle>
            <path
              d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"
            ></path>
          </svg>
          <span *ngIf="cartCount > 0" class="cart-badge">
            {{ cartCount }}
          </span>
        </a>

        <!-- Mobile Menu Toggle -->
        <button
          class="mobile-toggle"
          (click)="toggleMenu()"
          type="button"
          [attr.aria-label]="isMenuOpen ? 'إغلاق القائمة' : 'فتح القائمة'"
        >
          <span class="hamburger" [class.open]="isMenuOpen">
            <span class="line"></span>
            <span class="line"></span>
            <span class="line"></span>
          </span>
        </button>
      </div>

    </div>
  </div>

  <!-- Mobile Menu -->
  <div class="mobile-menu" [class.open]="isMenuOpen">
    <nav class="mobile-nav">
      <a
        *ngFor="let link of navLinks"
        [routerLink]="link.path"
        routerLinkActive="active"
        [routerLinkActiveOptions]="{ exact: link.path === '/' }"
        class="mobile-nav-link"
        (click)="closeMenu()"
      >
        <span class="mobile-link-icon">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="18"
            height="18"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <polyline points="9 18 15 12 9 6"></polyline>
          </svg>
        </span>
        <span class="mobile-link-text">{{ link.name }}</span>
      </a>

      <div class="mobile-divider"></div>

      <!-- Mobile Theme Toggle -->
      <button
        class="mobile-theme-toggle"
        (click)="toggleTheme()"
        type="button"
      >
        <span class="mobile-theme-icon">
          <svg *ngIf="isDark" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
            fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="4"></circle>
            <path d="M12 2v2M12 20v2M4.93 4.93l1.41 1.41M17.66 17.66l1.41 1.41M2 12h2M20 12h2M6.34 17.66l-1.41 1.41M19.07 4.93l-1.41 1.41"></path>
          </svg>
          <svg *ngIf="!isDark" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
            fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
          </svg>
        </span>
        <span class="mobile-theme-text">
          {{ isDark ? 'الوضع الفاتح' : 'الوضع الداكن' }}
        </span>
      </button>

      <div class="mobile-divider"></div>

      <a href="tel:01020216898" class="mobile-phone-link">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="20"
          height="20"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <path
            d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"
          ></path>
        </svg>
        <span dir="ltr">010 2021 6898</span>
      </a>
    </nav>
  </div>
</header>
